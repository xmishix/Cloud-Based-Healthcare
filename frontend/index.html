<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>UMKC Hospital Analytics - Readmission Prediction</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  <div class="app-container">
    <!-- Header -->
    <header class="top-header">
      <div>
        <h1>üè• <span class="umkc">UMKC</span> Hospital Analytics</h1>
        <p>AI-Powered Patient Readmission Risk Prediction & Staffing Optimization</p>
      </div>
    </header>

    <main class="main-grid">
      <!-- Prediction Form Card -->
      <section class="card prediction-card">
        <h2>üîç Patient Readmission Prediction</h2>
        <form id="predictionForm">
          <!-- Meta Information -->
          <div class="grid">
            <div class="field">
              <label>Patient ID</label>
              <input type="text" id="admission_id" placeholder="e.g., P001" required />
            </div>
            <div class="field">
              <label>Patient Name</label>
              <input type="text" id="patient_name" placeholder="Full name" required />
            </div>
            <div class="field">
              <label>Doctor Name</label>
              <input type="text" id="doctor_name" placeholder="Treating physician" />
            </div>
            <div class="field">
              <label>Hospital Name</label>
              <input type="text" id="hospital_name" placeholder="Care facility" />
            </div>
            <div class="field">
              <label>Admission Date</label>
              <input type="date" id="admission_date" />
            </div>
            <div class="field">
              <label>Discharge Date</label>
              <input type="date" id="discharge_date" />
            </div>
          </div>

          <!-- Common Medical Fields -->
          <div class="grid">
            <div class="field">
              <label>Age</label>
              <input type="number" id="Age" placeholder="Years" required />
            </div>
            <div class="field">
              <label>Sex</label>
              <select id="Sex" required>
                <option value="">Select gender</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
              </select>
            </div>
            <div class="field">
              <label>Weight (kg)</label>
              <input type="number" id="Weight" placeholder="kg" required />
            </div>
            <div class="field">
              <label>Blood Pressure</label>
              <input type="text" id="Blood_Pressure" placeholder="e.g., 120/80" required />
            </div>
            <div class="field">
              <label>Cholesterol</label>
              <input type="number" id="Cholesterol" placeholder="mg/dL" required />
            </div>
            <div class="field">
              <label>Insulin</label>
              <input type="number" id="Insulin" placeholder="¬µU/mL" required />
            </div>
            <div class="field">
              <label>Platelets</label>
              <input type="number" id="Platelets" placeholder="10^9/L" required />
            </div>
            <div class="field">
              <label>Diabetics</label>
              <select id="Diabetics" required>
                <option value="">Select</option>
                <option value="Yes">Yes</option>
                <option value="No">No</option>
              </select>
            </div>
          </div>

          <!-- Environmental & Social Factors -->
          <div class="grid">
            <div class="field">
              <label>Air Quality Index</label>
              <input type="number" id="air_quality_index" placeholder="0-500" />
            </div>
            <div class="field">
              <label>Social Event Count</label>
              <input type="number" id="social_event_count" placeholder="Count" />
            </div>
            <div class="field">
              <label>Condition Type</label>
              <select id="problem_type" required>
                <option value="">Select primary condition</option>
                <option value="diabetes">Diabetes</option>
                <option value="heart_failure">Heart Failure</option>
              </select>
            </div>
          </div>

          <!-- Diabetes-Specific Fields -->
          <div id="diabetes-fields" class="hidden conditional">
            <h3>üìä Diabetes Metrics</h3>
            <div class="grid">
              <div class="field">
                <label>Hemoglobin (g/dL)</label>
                <input type="number" step="0.1" id="Hemoglobin" placeholder="g/dL" />
              </div>
              <div class="field">
                <label>WBC Count (10^9/L)</label>
                <input type="number" step="0.1" id="WBC" placeholder="10^9/L" />
              </div>
              <div class="field">
                <label>Platelet Count (10^9/L)</label>
                <input type="number" step="0.1" id="Platelet_Count" placeholder="10^9/L" />
              </div>
              <div class="field">
                <label>Urine Protein (mg/dL)</label>
                <input type="number" step="0.1" id="Urine_Protein" placeholder="mg/dL" />
              </div>
              <div class="field">
                <label>Urine Glucose (mg/dL)</label>
                <input type="number" step="0.1" id="Urine_Glucose" placeholder="mg/dL" />
              </div>
            </div>
          </div>

          <!-- Heart Failure-Specific Fields -->
          <div id="hf-fields" class="hidden conditional">
            <h3>‚ù§Ô∏è Heart Failure Metrics</h3>
            <div class="grid">
              <div class="field">
                <label>ECG Result</label>
                <input type="number" step="0.1" id="ECG_Result" placeholder="mV" />
              </div>
              <div class="field">
                <label>Pulse Rate (bpm)</label>
                <input type="number" id="Pulse_Rate" placeholder="bpm" />
              </div>
            </div>
          </div>

          <!-- Action Buttons -->
          <div class="action-buttons">
            <button type="submit" class="primary-btn">üîç Predict Readmission Risk</button>
            <button id="downloadPdfBtn" class="secondary-btn" disabled>üìÑ Download Report</button>
          </div>

          <!-- Result Display -->
          <div id="result" class="result-box">
            <p>üí° Fill in patient information and click "Predict Readmission Risk" to generate a prediction.</p>
          </div>
        </form>
      </section>

      <!-- Staffing Simulator Card -->
      <aside class="card">
        <h2>üë• Staffing Simulator</h2>
        <p style="color: var(--gray-600); margin-bottom: var(--spacing-lg);">Simulate staffing needs based on predictions</p>
        
        <div class="grid">
          <div class="field">
            <label>Simulation Date</label>
            <input type="date" id="simulation_date" />
          </div>
          <div class="field">
            <label>Hospital / Unit</label>
            <input type="text" id="hospital_unit" placeholder="e.g., UMKC Main ICU" />
          </div>
        </div>

        <button id="simulateBtn" class="primary-btn" style="width: 100%; justify-content: center;">‚ñ∂ Run Simulation</button>

        <div id="staffingSummary" class="result-box" style="margin-top: var(--spacing-lg);">
          <p>No simulation run yet. Add patients and click "Run Simulation".</p>
        </div>

        <canvas id="staffingChart" height="120" style="margin-top: var(--spacing-lg);"></canvas>
      </aside>

      <!-- Risk Prediction Pie Chart -->
      <aside class="card">
        <h2>üìä Risk Distribution</h2>
        <p style="color: var(--gray-600); margin-bottom: var(--spacing-lg);">Pie chart showing risk level distribution</p>
        <canvas id="riskPieChart" height="150"></canvas>
      </aside>
    </main>

    <!-- Follow-up Dashboard -->
    <section class="card">
      <h2>üìã Follow-up Dashboard</h2>
      <table id="followupTable">
        <thead>
          <tr>
            <th>#</th>
            <th>Patient ID</th>
            <th>Patient Name</th>
            <th>Risk Level</th>
            <th>Probability</th>
            <th>Follow-up Method</th>
            <th>Timing</th>
          </tr>
        </thead>
        <tbody>
          <tr style="text-align: center;">
            <td colspan="7" style="color: var(--gray-600); padding: var(--spacing-lg);">
              No predictions yet. Add a patient above to get started.
            </td>
          </tr>
        </tbody>
      </table>
    </section>
  </div>

  <!-- Scripts -->
  <script src="script.js"></script>
</body>
</html>
